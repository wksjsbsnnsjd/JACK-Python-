<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>موقع فك التشفير باستخدام Base64, Zlib, Marshal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script> <!-- مكتبة pako لفك الضغط باستخدام Zlib -->
</head>
<body>
    <h1>موقع فك التشفير باستخدام Base64, Zlib, Marshal</h1>
    <textarea id="encodedText" rows="5" cols="50" placeholder="ضع النص المشفر هنا"></textarea><br><br>
    <button onclick="decodeData()">فك التشفير</button>
    <h3>النص المفكوك:</h3>
    <textarea id="decodedText" rows="5" cols="50" readonly placeholder="النص المفكوك سيظهر هنا"></textarea>

    <script>
        function decodeData() {
            var encoded = document.getElementById("encodedText").value;
            
            try {
                // فك تشفير Base64
                var decodedBase64 = atob(encoded);
                
                // تحويل النص المفكوك إلى مصفوفة بايتات
                var byteArray = new Uint8Array(decodedBase64.split('').map(function(c) { return c.charCodeAt(0); }));

                // فك الضغط باستخدام Zlib (مكتبة pako)
                var decompressedData = pako.inflate(byteArray, { to: 'string' });

                // هنا نحتاج إلى إرسال البيانات المفكوكة إلى الخادم للمعالجة باستخدام Marshal
                document.getElementById("decodedText").value = decompressedData;
            } catch (e) {
                alert("خطأ في فك التشفير أو فك الضغط. تأكد من صحة النص المدخل.");
            }
        }
    </script>
</body>
</html>
